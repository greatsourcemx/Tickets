<div class="card">
    <div class="card-body">
        <h4 class="card-title">Filtros</h4>
        <div class="col-8">
            <div class="row">
                <div *ngIf="users" class="col-3">
                    <select [(ngModel)]="param.responsable.id" name="tipo" class="form-control" required>
                        <option *ngFor="let tipo of users" [ngValue]="tipo.id">{{ tipo.nombre }}</option>
                    </select>
                </div>
                <div class="col-3">
                    <select [(ngModel)]="param.rango" name="range" id="range" class="form-control">
                        <option *ngFor="let rang of rangos" [value]="rang.value">{{ rang.displayName }}</option>
                    </select>
                </div>
                <div class="col-3">
                    <select [(ngModel)]="param.empresa" name="empr" id="empr" class="form-control">
                        <option value='Todos'>Todos</option>
                        <option *ngFor="let empr of empresas" [value]="empr.nombre">{{ empr.nombre }}</option>
                    </select>
                </div>
                <div class="col-3">
                    <button name="generar" class="btn btn-primary" (click)="generar()">Generar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="ratings" class="card">
    <div class="card-body">
        <div class="col-12">

            <h2 class="text-center" *ngIf="ratings.length === 0"> No se encontraron resultados </h2>
            <h2 *ngIf="ratings.length > 0">Promedio: ({{ ratings.length }}) <b>{{ promedio() | number: '1.2-2' }} </b> </h2>
            <table *ngIf="ratings.length > 0" class="table table-sm table-hover">
                <thead>
                    <tr>
                        <th>Solicitante</th>
                        <th>Ticket</th>
                        <th>Responsable</th>
                        <th>Fecha</th>
                        <th>Evaluaci√≥n</th>
                        <th>Comentario</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let rat of ratings">
                        <td>{{ rat.servicio.Solicitor.nombre }}</td>
                        <td>{{ rat.servicio.Id }} : {{ rat.servicio.Titulo }}</td>
                        <td>{{ rat.servicio.AsignadoA.nombre }}</td>
                        <td>{{ rat.fecha | fecha }}</td>
                        <td>
                            <ngb-rating readonly="false" [(rate)]="rat.rating">
                                <ng-template let-fill="fill" let-index="index">
                                    <span class="star" [style.width.%]="fill" [class.filled]="fill === 100"> <i class="fa fa-star"></i> </span>
                                </ng-template>
                            </ngb-rating>
                        </td>
                        <td>{{ rat.comentario }}</td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>
</div>